[gd_scene load_steps=32 format=3 uid="uid://blu36yhrbjqun"]

[ext_resource type="Script" path="res://player/player.gd" id="1_wje46"]
[ext_resource type="PackedScene" uid="uid://bcoo3a35rth0q" path="res://player/characters/barbarian.glb" id="2_26hi0"]
[ext_resource type="Script" path="res://player/camera.gd" id="3_q4s4b"]
[ext_resource type="Animation" uid="uid://cfeg0ibq06kyg" path="res://player/animations/Idle.res" id="5_6thic"]
[ext_resource type="Animation" uid="uid://bg3ubmoab08tn" path="res://player/animations/1H_Melee_Attack_Slice_Horizontal.res" id="6_8rjnb"]
[ext_resource type="Animation" uid="uid://bx7frnikbk2xe" path="res://player/animations/Running_Strafe_Left.res" id="8_ifhay"]
[ext_resource type="Animation" uid="uid://cfq2fx81c0iv1" path="res://player/animations/Running_Strafe_Right.res" id="9_5ttx4"]
[ext_resource type="Animation" uid="uid://dt78k5jcqb2q4" path="res://player/animations/Running_A.res" id="9_iwyy4"]

[sub_resource type="FastNoiseLite" id="FastNoiseLite_xnuiw"]
frequency = 0.0283

[sub_resource type="AnimationLibrary" id="AnimationLibrary_hsw6b"]
_data = {
"1H_Melee_Attack_Slice_Horizontal": ExtResource("6_8rjnb"),
"Idle": ExtResource("5_6thic"),
"Running_A": ExtResource("9_iwyy4"),
"Running_Strafe_Left": ExtResource("8_ifhay"),
"Running_Strafe_Right": ExtResource("9_5ttx4")
}

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_nttbo"]
animation = &"1H_Melee_Attack_Slice_Horizontal"

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_tcc2j"]
filter_enabled = true
filters = ["../..", "Node", "Rig/Skeleton3D:chest", "Rig/Skeleton3D:elbowIK.l", "Rig/Skeleton3D:elbowIK.r", "Rig/Skeleton3D:hand.l", "Rig/Skeleton3D:hand.r", "Rig/Skeleton3D:handIK.l", "Rig/Skeleton3D:handIK.r", "Rig/Skeleton3D:handslot.l", "Rig/Skeleton3D:handslot.r", "Rig/Skeleton3D:head", "Rig/Skeleton3D:hips", "Rig/Skeleton3D:lowerarm.l", "Rig/Skeleton3D:lowerarm.r", "Rig/Skeleton3D:spine", "Rig/Skeleton3D:upperarm.l", "Rig/Skeleton3D:upperarm.r"]
fadein_time = 0.1
fadeout_time = 0.3

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_qj71q"]
animation = &"Running_Strafe_Left"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_tn5or"]
animation = &"Running_Strafe_Right"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_8t5iu"]
animation = &"Running_A"

[sub_resource type="AnimationNodeBlendSpace1D" id="AnimationNodeBlendSpace1D_o3uwm"]
blend_point_0/node = SubResource("AnimationNodeAnimation_qj71q")
blend_point_0/pos = -1.0
blend_point_1/node = SubResource("AnimationNodeAnimation_tn5or")
blend_point_1/pos = 1.0
blend_point_2/node = SubResource("AnimationNodeAnimation_8t5iu")
blend_point_2/pos = 0.0

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_mb6jd"]
animation = &"Idle"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_g3304"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_7h0yt"]
xfade_time = 0.2
advance_mode = 2
advance_expression = "state == states.RUNNING"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_hqcaf"]
xfade_time = 0.2
advance_mode = 2
advance_expression = "state == states.IDLE"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_5jugg"]
states/BlendSpace1D/node = SubResource("AnimationNodeBlendSpace1D_o3uwm")
states/BlendSpace1D/position = Vector2(617, 87)
states/Idle/node = SubResource("AnimationNodeAnimation_mb6jd")
states/Idle/position = Vector2(387, 93)
transitions = ["Start", "Idle", SubResource("AnimationNodeStateMachineTransition_g3304"), "Idle", "BlendSpace1D", SubResource("AnimationNodeStateMachineTransition_7h0yt"), "BlendSpace1D", "Idle", SubResource("AnimationNodeStateMachineTransition_hqcaf")]

[sub_resource type="AnimationNodeTimeScale" id="AnimationNodeTimeScale_fsmn1"]

[sub_resource type="AnimationNodeTransition" id="AnimationNodeTransition_e1e67"]
allow_transition_to_self = true
input_0/name = "state_0"
input_0/auto_advance = false
input_0/reset = true

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_fdw2x"]
graph_offset = Vector2(-491.117, 43.9263)
nodes/Animation/node = SubResource("AnimationNodeAnimation_nttbo")
nodes/Animation/position = Vector2(-420, 320)
nodes/Attack/node = SubResource("AnimationNodeOneShot_tcc2j")
nodes/Attack/position = Vector2(360, 160)
nodes/StateMachine/node = SubResource("AnimationNodeStateMachine_5jugg")
nodes/StateMachine/position = Vector2(-200, 160)
nodes/TimeScale/node = SubResource("AnimationNodeTimeScale_fsmn1")
nodes/TimeScale/position = Vector2(40, 180)
nodes/Transition/node = SubResource("AnimationNodeTransition_e1e67")
nodes/Transition/position = Vector2(100, 360)
nodes/output/position = Vector2(580, 160)
node_connections = [&"Attack", 0, &"TimeScale", &"Attack", 1, &"Transition", &"TimeScale", 0, &"StateMachine", &"Transition", 0, &"Animation", &"output", 0, &"Attack"]

[sub_resource type="Curve" id="Curve_leywb"]
_data = [Vector2(0, 0.32967), 0.0, 0.0, 0, 0, Vector2(0.233333, 0.472527), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 3

[sub_resource type="CurveTexture" id="CurveTexture_d1htj"]
curve = SubResource("Curve_leywb")

[sub_resource type="ParticleProcessMaterial" id="ParticleProcessMaterial_sy8us"]
direction = Vector3(0, 1, 0)
spread = 25.0
initial_velocity_min = 5.0
initial_velocity_max = 5.0
scale_min = 0.5
scale_max = 0.5
scale_curve = SubResource("CurveTexture_d1htj")
color = Color(0.397305, 0.00796946, 0.0822641, 1)

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_ulgu7"]
vertex_color_use_as_albedo = true

[sub_resource type="BoxMesh" id="BoxMesh_el310"]
material = SubResource("StandardMaterial3D_ulgu7")

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_5f86y"]
height = 2.2

[sub_resource type="SphereMesh" id="SphereMesh_343tl"]
radial_segments = 16
rings = 8

[node name="Player" type="CharacterBody3D"]
collision_layer = 2
script = ExtResource("1_wje46")

[node name="Mesh" type="Node3D" parent="."]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0)

[node name="barbarian" parent="Mesh" instance=ExtResource("2_26hi0")]

[node name="Skeleton3D" parent="Mesh/barbarian/Rig" index="0"]
bones/1/position = Vector3(0, 0.368268, 0)
bones/1/rotation = Quaternion(-1.11123e-10, 0.0431578, 2.57241e-09, 0.999068)
bones/4/rotation = Quaternion(-0.550519, -0.0570331, -0.640775, 0.532056)
bones/5/rotation = Quaternion(3.86824e-08, -3.55053e-08, -0.511371, 0.85936)
bones/7/rotation = Quaternion(-0.320413, -0.3387, 0.147521, 0.87227)
bones/8/rotation = Quaternion(0.00123758, 0.00123757, -0.702549, 0.711634)
bones/11/rotation = Quaternion(-0.609322, 0.0775618, 0.616033, 0.493167)
bones/12/rotation = Quaternion(4.8068e-08, 4.63618e-08, 0.533916, 0.845537)
bones/14/rotation = Quaternion(-0.319531, 0.314617, -0.229695, 0.863803)
bones/15/rotation = Quaternion(0.00382112, 0.00450072, 0.703123, 0.711044)
bones/19/rotation = Quaternion(-5.80608e-11, -0.0313417, -1.88012e-09, 0.999509)
bones/22/rotation = Quaternion(0.98935, 0.0838184, 0.0788919, 0.0890949)
bones/23/rotation = Quaternion(0.400425, 5.62655e-08, -2.71348e-07, 0.91633)
bones/24/rotation = Quaternion(-0.624352, -0.200486, 0.0777502, 0.750963)
bones/26/rotation = Quaternion(0.991162, -0.0335157, 0.0297454, 0.124861)
bones/27/rotation = Quaternion(0.444001, -5.87479e-08, 3.12242e-07, 0.896026)
bones/28/rotation = Quaternion(-0.650146, 0.112372, -0.0238415, 0.751075)
bones/29/rotation = Quaternion(3.04791e-08, 0.920355, -0.391084, -6.94849e-08)
bones/30/rotation = Quaternion(0.707107, -2.29302e-07, -4.60552e-08, 0.707107)
bones/31/position = Vector3(0.202182, 0.0259903, 0.205181)
bones/31/rotation = Quaternion(-0.707107, -7.05285e-08, -7.05285e-08, 0.707107)
bones/32/rotation = Quaternion(9.65792e-09, 1.77955e-09, 0.985719, -0.168398)
bones/33/rotation = Quaternion(-1.04035e-07, 0.391084, 0.920355, -2.9526e-08)
bones/35/rotation = Quaternion(1, -3.10863e-15, 1.94707e-07, -6.91739e-22)
bones/37/rotation = Quaternion(0.707107, -3.82385e-08, 1.45009e-07, 0.707107)
bones/38/rotation = Quaternion(-0.707107, -7.05285e-08, -7.05285e-08, 0.707107)
bones/39/rotation = Quaternion(-5.83589e-09, 6.43837e-10, 0.994809, 0.101756)
bones/40/rotation = Quaternion(-1.04035e-07, 0.391084, 0.920355, -2.95261e-08)
bones/45/position = Vector3(0.520841, 0.7714, -0.0576374)
bones/45/rotation = Quaternion(0.794627, -1.11759e-07, 0.607098, -5.96046e-08)
bones/47/position = Vector3(-0.510844, 0.771399, 0.0597369)
bones/47/rotation = Quaternion(-0.758253, -1.52737e-07, 0.651961, -1.11759e-08)

[node name="1H_Axe_Offhand" parent="Mesh/barbarian/Rig/Skeleton3D" index="0"]
transform = Transform3D(1.18171e-06, 0.262865, 0.964832, 0.999911, -0.0128468, 0.00349912, 0.0133151, 0.964747, -0.262841, 0.516037, 0.619496, 0.0144966)

[node name="Barbarian_Round_Shield" parent="Mesh/barbarian/Rig/Skeleton3D" index="1"]
transform = Transform3D(9.70222e-07, 0.262864, 0.964832, 0.99991, -0.0128493, 0.00350002, 0.0133178, 0.964747, -0.262841, 0.662156, 0.620251, -0.0421992)

[node name="1H_Axe" parent="Mesh/barbarian/Rig/Skeleton3D" index="2"]
transform = Transform3D(-0.00269419, -0.161505, 0.986867, 0.999936, -0.0112061, 0.000895659, 0.0109146, 0.986808, 0.161526, -0.495741, 0.624051, 0.14036)

[node name="2H_Axe" parent="Mesh/barbarian/Rig/Skeleton3D" index="3"]
transform = Transform3D(-0.00269419, -0.161505, 0.986867, 0.999936, -0.0112061, 0.000895659, 0.0109146, 0.986808, 0.161526, -0.495741, 0.624051, 0.14036)

[node name="Mug" parent="Mesh/barbarian/Rig/Skeleton3D" index="4"]
transform = Transform3D(-0.00269419, -0.161505, 0.986867, 0.999936, -0.0112061, 0.000895659, 0.0109146, 0.986808, 0.161526, -0.487026, 0.324053, 0.0887789)

[node name="Barbarian_Hat" parent="Mesh/barbarian/Rig/Skeleton3D" index="5"]
transform = Transform3D(0.99972, -1.40143e-09, 0.0236466, 1.39341e-09, 1, 3.55686e-10, -0.0236466, -3.22637e-10, 0.99972, -7.55726e-09, 1.17848, -1.39052e-07)

[node name="Barbarian_Hat" parent="Mesh/barbarian/Rig/Skeleton3D/Barbarian_Hat" index="0"]
transform = Transform3D(1, -4.25007e-17, 0, -2.65413e-16, 1, 2.77556e-17, 0, 2.77556e-17, 1, 0, 0, 0)
gi_mode = 2

[node name="Barbarian_Cape" parent="Mesh/barbarian/Rig/Skeleton3D" index="6"]
transform = Transform3D(0.996275, -5.14962e-09, 0.0862353, 5.13043e-09, 1, 4.44077e-10, -0.0862353, 1.8939e-15, 0.996275, -1.91641e-06, 1.17848, 2.59003e-08)

[node name="Barbarian_Cape" parent="Mesh/barbarian/Rig/Skeleton3D/Barbarian_Cape" index="0"]
transform = Transform3D(1, -6.46233e-16, 0, 2.43034e-16, 1, 1.90705e-17, 0, 3.89106e-18, 1, 0, 0, 0)
gi_mode = 2

[node name="Barbarian_ArmLeft" parent="Mesh/barbarian/Rig/Skeleton3D" index="7"]
gi_mode = 2

[node name="Barbarian_ArmRight" parent="Mesh/barbarian/Rig/Skeleton3D" index="8"]
gi_mode = 2

[node name="Barbarian_Body" parent="Mesh/barbarian/Rig/Skeleton3D" index="9"]
gi_mode = 2

[node name="Barbarian_Head" parent="Mesh/barbarian/Rig/Skeleton3D" index="10"]
gi_mode = 2

[node name="Barbarian_LegLeft" parent="Mesh/barbarian/Rig/Skeleton3D" index="11"]
gi_mode = 2

[node name="Barbarian_LegRight" parent="Mesh/barbarian/Rig/Skeleton3D" index="12"]
gi_mode = 2

[node name="CameraPivot" type="Node3D" parent="."]
top_level = true

[node name="Camera" type="Camera3D" parent="CameraPivot"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 7.08722, -11)
cull_mask = 983039
current = true
script = ExtResource("3_q4s4b")
noise = SubResource("FastNoiseLite_xnuiw")

[node name="Node3D" type="Node3D" parent="CameraPivot"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 7.08722, -11)

[node name="Animation" type="Node" parent="."]

[node name="AnimationPlayer" type="AnimationPlayer" parent="Animation"]
root_node = NodePath("")
libraries = {
"": SubResource("AnimationLibrary_hsw6b")
}

[node name="AnimationTree" type="AnimationTree" parent="Animation"]
root_node = NodePath("../../Mesh/barbarian")
tree_root = SubResource("AnimationNodeBlendTree_fdw2x")
advance_expression_base_node = NodePath("../..")
anim_player = NodePath("../AnimationPlayer")
parameters/Attack/active = false
parameters/Attack/internal_active = false
parameters/Attack/request = 0
parameters/StateMachine/BlendSpace1D/blend_position = -0.548048
parameters/TimeScale/scale = 1.0
parameters/Transition/current_state = "state_0"
parameters/Transition/transition_request = ""
parameters/Transition/current_index = 0

[node name="Node3D" type="Node3D" parent="."]

[node name="GPUParticles3D" type="GPUParticles3D" parent="Node3D"]
transform = Transform3D(-1, 0, -8.74228e-08, 0, 1, 0, 8.74228e-08, 0, -1, 0, 0, 0)
emitting = false
amount = 50
process_material = SubResource("ParticleProcessMaterial_sy8us")
draw_pass_1 = SubResource("BoxMesh_el310")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.1, 0)
shape = SubResource("CapsuleShape3D_5f86y")

[node name="MeshInstance3D" type="MeshInstance3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.4, 0)
layers = 65536
mesh = SubResource("SphereMesh_343tl")

[editable path="Mesh/barbarian"]
